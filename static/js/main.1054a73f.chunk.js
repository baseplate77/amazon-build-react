(this["webpackJsonpamazon-app"]=this["webpackJsonpamazon-app"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),l=a.n(c),i=(a(61),a(49)),o=a(3),m=(a(62),a(12)),s=a(6),u=a(50),d=a.n(u),p=a(51),E=a.n(p),_=(a(63),Object(n.createContext)()),h=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(_.Provider,{value:Object(n.useReducer)(t,a)},c)},g=function(){return Object(n.useContext)(_)},v=a(32),f=a.n(v),b=f.a.initializeApp({apiKey:"AIzaSyDAKnsdyO_jr2JM_5L4wO_hyrO1KqFBzjw",authDomain:"full-stack-dbef7.firebaseapp.com",databaseURL:"https://full-stack-dbef7.firebaseio.com",projectId:"full-stack-dbef7",storageBucket:"full-stack-dbef7.appspot.com",messagingSenderId:"700876037391",appId:"1:700876037391:web:e75b6ccb5e81537d19b27a",measurementId:"G-D4H3SC4X32"}).firestore(),y=f.a.auth();var O=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],n=a.basket,c=a.user,l=t[1];return console.log("user Header",c),r.a.createElement("div",{className:"header"},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{className:"header__img",src:"http://pngimg.com/uploads/amazon/amazon_PNG25.png"})),r.a.createElement("div",{className:"header__searchbar"},r.a.createElement("input",null),r.a.createElement(d.a,null)),r.a.createElement("div",{className:"header__nav"},r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Hello, ",c?c.email:"Guest"),r.a.createElement(m.b,{to:!c&&"/login"},r.a.createElement("span",{className:"header__optionLineTwo",onClick:function(){c&&(y.signOut(),l({type:"SET_USER",user:null}),console.log("AftersignOut",c))}},c?"Sign Out":"Sign In"))),r.a.createElement(m.b,{to:"/orders"},r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Return"),r.a.createElement("span",{className:"header__optionLineTwo"},"$ Orders"))),r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Try"),r.a.createElement("span",{className:"header__optionLineTwo"},"Prime")),r.a.createElement(m.b,{to:"/checkout"},r.a.createElement("div",{className:"header__optionBasket"},r.a.createElement(E.a,null),r.a.createElement("span",{className:"header__optionLineTwo header__count"},n.length)))))};a(79),a(80);var N=function(e){var t=e.id,a=e.title,n=e.price,c=e.rating,l=e.img,i=g(),m=Object(o.a)(i,2),s=(m[0].basket,m[1]);return r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"product__info"},r.a.createElement("p",{className:"product__infoTitle"},a),r.a.createElement("p",{className:"product__infoPrice"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,n)),r.a.createElement("div",{className:"product__rating"},Array(c).fill().map((function(e){return r.a.createElement("p",null,"\u2b50")})))),r.a.createElement("img",{className:"product__infoImage",src:l}),r.a.createElement("button",{onClick:function(){s({type:"ADD_TO_BASKET",item:{id:t,title:a,price:n,rating:c,img:l}})}},"Add to Basket"))};var k=function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home__container"},r.a.createElement("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/31/AmazonVideo/2020/X-site/Multititle/Aug/1500x600_Hero-Tall_np._CB404803728_.jpg"}),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{key:1,id:1,title:"Make Time: How to focus on what matters every day",price:49.99,rating:4,img:"https://m.media-amazon.com/images/I/51gQ7pHF-zL.jpg"}),r.a.createElement(N,{key:2,id:2,title:"Samsung 6.0 Kg Inverter 5 Star Fully-Automatic Front Loading Washing Machine (WW60R20GLMA/TL, White)",price:159.99,rating:3,img:"https://images-na.ssl-images-amazon.com/images/I/614-yYoVkUL._SL1500_.jpg"})),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{key:3,id:3,title:"Apple iPhone 11 Pro (64GB) - Space Grey",price:999.99,rating:5,img:"https://images-na.ssl-images-amazon.com/images/I/61m6DjujESL._SL1024_.jpg"}),r.a.createElement(N,{key:4,id:4,title:"Apple iPad Pro (11-inch, Wi-Fi, 128GB) - Silver (2nd Generation)",price:1299.99,rating:4,img:"https://images-na.ssl-images-amazon.com/images/I/815a%2BXjrgvL._SL1500_.jpg"}),r.a.createElement(N,{key:5,id:5,title:"Apple MacBook Pro (16-inch, 16GB RAM, 512GB Storage, 2.6GHz 9th Gen Intel Core i7) - Space Grey",price:1899.99,rating:5,img:"https://images-na.ssl-images-amazon.com/images/I/71L2iBSyyOL._SL1500_.jpg"})),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{key:6,id:6,title:"LG 189 cm (75 inches) 4K UHD Smart Nano-cell TV 75SM9400PTA (Ceramic BK + Dark Steel Silver) (2019 Model)",price:2599.99,rating:3,img:"https://images-na.ssl-images-amazon.com/images/I/A1Hw0qRh4WL._SL1500_.jpg"}))))},j=(a(81),a(82),a(29)),S=a.n(j);var T=function(e){var t=e.totalPrice,a=e.NumberItem,n=Object(s.f)(),c=g(),l=Object(o.a)(c,2);return l[0].basket,l[1],r.a.createElement("div",{className:"subTotal"},r.a.createElement(S.a,{renderText:function(e){return r.a.createElement("h2",null,"SubTotal (",a," items) : ",e)},value:t,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("div",{className:"subTotal__gift"},r.a.createElement("input",{type:"checkbox"}),"This order contains a gift"),r.a.createElement("button",{onClick:function(e){return n.push("/payment")}},"Proceed to Checkout"))},w=(a(84),a(36));var A=function(e){var t=e.id,a=e.title,c=e.price,l=e.rating,i=e.img,m=e.hideButton,s=g(),u=Object(o.a)(s,2),d=u[0].basket,p=u[1],E=Object(n.useState)(),_=Object(o.a)(E,2),h=_[0],v=_[1],f=Object(w.b)({opacity:h?0:1,height:h?"100px":"200px",config:{duration:500}});return r.a.createElement(w.a.div,{className:"checkoutItem",style:f},r.a.createElement("div",{className:""},r.a.createElement("img",{className:"checkoutItem__img",src:i})),r.a.createElement("div",{className:"checkoutItem__info"},r.a.createElement("h4",null,a),r.a.createElement("p",null,r.a.createElement("small",null,"$"),r.a.createElement("strong",null,c)),r.a.createElement("div",{className:"checkoutItem__rating"},Array(l).fill().map((function(e){return r.a.createElement("p",null,"\ud83c\udf1f")}))),!m&&r.a.createElement("button",{onClick:function(){v(!h),setTimeout((function(){var e=null===d||void 0===d?void 0:d.findIndex((function(e){return e.id===t}));d.splice(e,1),p({type:"REMOVE_FROM_BASKET",item:d})}),550)}},"Remove from basket")))};var B=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],n=a.basket,c=a.user,l=(t[1],0);return r.a.createElement("div",{className:"checkout"},r.a.createElement("div",{className:"checkout__left"},r.a.createElement("img",{className:"checkout__ad",src:"https://images-eu.ssl-images-amazon.com/images/G/31/AmazonVideo/2020/X-site/SingleTitle/ShakuntalaDevi/400x39-SWM_With-Disclaimer_np._CB406908440_.jpg"}),r.a.createElement("div",{className:"checkout__title"},r.a.createElement("h2",null,"Hi,",c?c.email:"Sign In to Checkout"),r.a.createElement("h2",null,"Your shopping Basket "),n.map((function(e){return l+=e.price,r.a.createElement(A,{key:e.id,id:e.id,title:e.title,price:e.price,img:e.img})})))),r.a.createElement("div",{className:"checkout__right"},r.a.createElement(T,{totalPrice:l.toFixed(2),NumberItem:null===n||void 0===n?void 0:n.length})))};a(85);var I=function(){var e=Object(s.f)(),t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],p=u[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"login"},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg"})),r.a.createElement("div",{className:"login__container"},r.a.createElement("h1",null,"Sign In"),r.a.createElement("form",null,r.a.createElement("h5",null,"E-mail"),r.a.createElement("input",{type:"emial",onChange:function(e){return l(e.target.value)},value:c}),r.a.createElement("h5",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return p(e.target.value)},value:d}),r.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),y.signInWithEmailAndPassword(c,d).then((function(t){t&&e.push("/")})).catch((function(e){return alert(e.message)}))}},"Sign In")),r.a.createElement("p",null,"By Signing in , you agree to Amazon's ",r.a.createElement("a",null,"Conditions")," of"," ",r.a.createElement("a",null,"Use")," and",r.a.createElement("a",null,"Privacy Notice"),"."),r.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),y.createUserWithEmailAndPassword(c,d).then((function(t){console.log(t),t.user&&e.push("/")})).catch((function(e){return alert(e.message)}))}}," ","Cerate new Amazon Account"))),r.a.createElement("div",{className:"login__bottom_contaniner"},r.a.createElement("div",{className:"login__bottom"},r.a.createElement("a",null," Conditions of Use "),r.a.createElement("a",null," Privacy Notice "),r.a.createElement("a",null," Help ")),r.a.createElement("p",null,"\xa9 1996-2020, Amazon.com, Inc. or its affiliates")))},L=a(25),C=a.n(L),z=a(35),P=(a(87),a(19)),x=a(17),M=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0).toFixed(2)},D=a(22),R=a(52),G=a.n(R).a.create({baseURL:"http://localhost:5001/full-stack-dbef7/us-central1/api"});var W=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],c=a.basket,l=a.user,i=t[1],u=Object(D.useStripe)(),d=Object(D.useElements)(),p=Object(n.useState)(!0),E=Object(o.a)(p,2),_=E[0],h=E[1],v=Object(n.useState)(""),f=Object(o.a)(v,2),y=f[0],O=f[1],N=Object(n.useState)(null),k=Object(o.a)(N,2),j=k[0],T=k[1],w=Object(n.useState)(!1),B=Object(o.a)(w,2),I=B[0],L=B[1],P=Object(n.useState)(!0),x=Object(o.a)(P,2),R=x[0],W=x[1],K=Object(s.f)();Object(n.useEffect)((function(){(function(){var e=Object(z.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G({method:"post",url:"/payment/create?total=".concat(100*M(c))});case 2:t=e.sent,W(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),console.log("clientSecret",R);var U=function(){var e=Object(z.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),e.next=4,u.confirmCardPayment(R,{payment_method:{card:d.getElement(D.CardElement)}}).then((function(e){var t=e.paymentIntent;L(!0),T(null),O(!1),b.collection("users").doc(null===l||void 0===l?void 0:l.uid).collection("orders").doc(t.id).set({paymentId:t.id,amount:t.amount,date:t.created,basket:c}),i({type:"EMPTY_BASKET"}),K.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"payment"},r.a.createElement("div",{className:"payment__container"},r.a.createElement("h1",null," ","Checkout (",r.a.createElement(m.b,{to:"/checkout"},null===c||void 0===c?void 0:c.length," items"),")"),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null," Delivary address")),r.a.createElement("div",{className:"payment__address"},r.a.createElement("p",null,null===l||void 0===l?void 0:l.email),r.a.createElement("p",null,"pawan nagar ,TV center"),r.a.createElement("p",null,"Aurangabad"))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"review items and delivery")),r.a.createElement("div",{className:"payment__item"},c.map((function(e){return r.a.createElement(A,{key:e.id,id:e.id,title:e.title,price:e.price,img:e.img})})))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Payment method")),r.a.createElement("div",{className:"payment__detail"},r.a.createElement("form",{onSubmit:U},r.a.createElement(D.CardElement,{className:"stripeCard",onChange:function(e){console.log(e),h(e.empty),T(e.error?e.error.message:"")}}),j&&r.a.createElement("div",{style:{color:"red"}},j),r.a.createElement("div",{className:"payment__price"},r.a.createElement(S.a,{renderText:function(e){return r.a.createElement("h2",null,"Order Total ",e)},value:M(c),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{disabled:y||_||I,type:"submit"},r.a.createElement("span",null,y?r.a.createElement("p",null,"Processing"):"Buy Now"))))))))},K=a(53),U=(a(104),a(105),a(54)),F=a.n(U);var H=function(e){var t,a=e.order;return console.log(a),r.a.createElement("div",{className:"order"},r.a.createElement("h2",null,"Order"),r.a.createElement("p",null,F.a.unix(a.data.date).format("MMMM Do YYYY, h:mma")),r.a.createElement("p",{className:"order__id"},a.id),null===a||void 0===a||null===(t=a.data.basket)||void 0===t?void 0:t.map((function(e){return r.a.createElement("div",{className:"order__container"},r.a.createElement(A,{key:e.id,id:e.id,title:e.title,price:e.price,img:e.img,hideButton:!0}),r.a.createElement("hr",null))})),r.a.createElement("h2",{className:"order__price"},"Order Total: $",(null===a||void 0===a?void 0:a.data.amount)/100))};var Y=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=g(),i=Object(o.a)(l,2),m=i[0].user;return i[1],Object(n.useEffect)((function(){m?b.collection("users").doc(null===m||void 0===m?void 0:m.uid).collection("orders").orderBy("date","desc").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):c([])}),[m]),r.a.createElement("div",{className:"orders"},r.a.createElement("h1",null,"Your Order"),r.a.createElement("div",{className:"orders__container"},null===a||void 0===a?void 0:a.map((function(e){return r.a.createElement(H,{order:e})}))))},V=Object(K.a)("pk_test_51HRWD2Ak5diG4tD3h5Oy2FOri3NBpF9Q5hmUf7RjhkmoTmAeerYqhw695CXNEeysK6USLenl2liy3hQihLWu8FqB00EjwQXfED");var $=function(){var e=g(),t=Object(o.a)(e,2);Object(i.a)(t[0]);var a=t[1];return Object(n.useEffect)((function(){y.onAuthStateChanged((function(e){e?(console.log("the user ",null===e||void 0===e?void 0:e.id),a({type:"SET_USER",user:e})):a({type:"STE_USER",user:null})}))}),[]),r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/Login"},r.a.createElement(I,null)),r.a.createElement(s.a,{path:"/checkout"},r.a.createElement(O,null),r.a.createElement(B,null)),r.a.createElement(s.a,{path:"/payment"},r.a.createElement(O,null),r.a.createElement(D.Elements,{stripe:V},r.a.createElement(W,null))),r.a.createElement(s.a,{path:"/orders"},r.a.createElement(O,null),r.a.createElement(Y,null)),r.a.createElement(s.a,{path:"/"},r.a.createElement(O,null),r.a.createElement(k,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,{initialState:{basket:[],user:null},reducer:function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(x.a)(Object(x.a)({},e),{},{basket:[].concat(Object(P.a)(e.basket),[t.item])});case"EMPTY_BASKET":return Object(x.a)(Object(x.a)({},e),{},{basket:[]});case"REMOVE_FROM_BASKET":return Object(x.a)(Object(x.a)({},e),{},{basket:Object(P.a)(t.item)});case"SET_USER":return Object(x.a)(Object(x.a)({},e),{},{user:t.user});default:return e}}},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a(108)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.1054a73f.chunk.js.map